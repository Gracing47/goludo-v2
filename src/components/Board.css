/* ============================================
   LUDO BOARD - UNI-SWAP INSPIRED POLISH
   ============================================ */

.board-wrapper {
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    width: 100%;
    height: 100%;
    padding: 0;
}

.ludo-board {
    position: relative;
    display: grid;
    grid-template-columns: repeat(15, 1fr);
    grid-template-rows: repeat(15, 1fr);

    /* Mobile First: Fill width, but respect max height to leave room for HUD */
    width: min(var(--board-mobile-width), var(--board-mobile-height), var(--board-max-size));
    height: min(var(--board-mobile-width), var(--board-mobile-height), var(--board-max-size));
    aspect-ratio: 1;

    /* Ultra-Premium Glass Effect */
    background: rgba(5, 5, 15, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);

    border-radius: 36px;
    padding: 8px;
    gap: 2px;
    /* Tight gap for seamless feel */

    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow:
        0 24px 70px rgba(0, 0, 0, 0.8),
        inset 0 0 60px rgba(34, 211, 238, 0.05),
        0 0 30px rgba(34, 211, 238, 0.1);

    transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.ludo-board::before {
    content: '';
    position: absolute;
    inset: -1px;
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.1) 0%, transparent 40%, rgba(255, 255, 255, 0.05) 100%);
    border-radius: 32px;
    pointer-events: none;
    z-index: 2;
}

.token-layer {
    position: absolute;
    inset: 8px;
    /* Match padding */
    display: grid;
    grid-template-columns: repeat(15, 1fr);
    grid-template-rows: repeat(15, 1fr);
    z-index: 10;
    pointer-events: none;
    gap: 2px;
}

.token-layer>* {
    pointer-events: auto;
}

/* ============================================
   CELL STYLES - SOFT & ORGANIC
   ============================================ */

.board-cell {
    position: relative;
    background: rgba(255, 255, 255, 0.03);
    border-radius: 4px;
    /* Soft cells */
    transition: background 0.3s ease;
}

.empty {
    background: transparent;
    border: none;
}

.path {
    background: rgba(200, 210, 255, 0.08);
    /* Slight blue tint for path */
    border: 1px solid rgba(255, 255, 255, 0.05);
}

.safe {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(255, 180, 0, 0.05));
    border: 1px solid rgba(255, 215, 0, 0.3);
    box-shadow: inset 0 0 10px rgba(255, 215, 0, 0.1);
}

.safe::after {
    content: 'â˜…';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(calc(-1 * var(--board-rotation, 0deg)));
    color: #ffcc00;
    /* Richer Gold */
    font-size: clamp(10px, 2.5vw, 16px);
    filter: drop-shadow(0 0 4px rgba(255, 215, 0, 0.8));
    pointer-events: none;
}

/* ============================================
   BASES - VIBRANT & GRADIENT
   ============================================ */

/* Generic Base Cell Style */
[class*="base-"] {
    border-radius: 4px;
    border: none;
}

/* Red Base */
.base-red {
    background: linear-gradient(135deg, rgba(255, 59, 78, 0.25), rgba(255, 0, 30, 0.15));
}

.base-red.base-edge {
    border: 1px solid rgba(255, 59, 78, 0.3);
}

/* Green Base */
.base-green {
    background: linear-gradient(135deg, rgba(0, 255, 136, 0.25), rgba(0, 200, 100, 0.15));
}

.base-green.base-edge {
    border: 1px solid rgba(0, 255, 136, 0.3);
}

/* Yellow Base */
.base-yellow {
    background: linear-gradient(135deg, rgba(255, 204, 0, 0.25), rgba(255, 160, 0, 0.15));
}

.base-yellow.base-edge {
    border: 1px solid rgba(255, 204, 0, 0.3);
}

/* Blue Base */
.base-blue {
    background: linear-gradient(135deg, rgba(34, 180, 255, 0.25), rgba(0, 140, 255, 0.15));
}

.base-blue.base-edge {
    border: 1px solid rgba(34, 180, 255, 0.3);
}

/* Spawn Points - Floating Dais */
.spawn-point {
    position: relative;
    background: rgba(255, 255, 255, 0.15) !important;
    border-radius: 50% !important;
    margin: 12% !important;
    border: 2px solid rgba(255, 255, 255, 0.2) !important;
    box-shadow:
        inset 0 2px 6px rgba(255, 255, 255, 0.1),
        0 4px 8px rgba(0, 0, 0, 0.2);
}

/* Active Base Glow - Stronger cues */
.active-turn {
    filter: brightness(1.2);
    z-index: 10;
}

.base-red.active-turn {
    background: linear-gradient(135deg, rgba(255, 59, 78, 0.6), rgba(255, 0, 30, 0.4)) !important;
    box-shadow: 0 0 25px rgba(255, 59, 78, 0.5);
}

.base-green.active-turn {
    background: linear-gradient(135deg, rgba(0, 255, 136, 0.6), rgba(0, 200, 100, 0.4)) !important;
    box-shadow: 0 0 25px rgba(0, 255, 136, 0.5);
}

.base-yellow.active-turn {
    background: linear-gradient(135deg, rgba(255, 204, 0, 0.6), rgba(255, 160, 0, 0.4)) !important;
    box-shadow: 0 0 25px rgba(255, 204, 0, 0.5);
}

.base-blue.active-turn {
    background: linear-gradient(135deg, rgba(34, 180, 255, 0.6), rgba(0, 140, 255, 0.4)) !important;
    box-shadow: 0 0 25px rgba(34, 180, 255, 0.5);
}

/* ============================================
   HOME STRETCH - GLOWING PATHS
   ============================================ */

.home-red {
    background: linear-gradient(90deg, rgba(255, 59, 78, 0.4) 0%, rgba(255, 59, 78, 0.1) 100%);
    border-top: 1px solid rgba(255, 59, 78, 0.3);
    border-bottom: 1px solid rgba(255, 59, 78, 0.3);
}

.home-green {
    background: linear-gradient(180deg, rgba(0, 255, 136, 0.4) 0%, rgba(0, 255, 136, 0.1) 100%);
    border-left: 1px solid rgba(0, 255, 136, 0.3);
    border-right: 1px solid rgba(0, 255, 136, 0.3);
}

.home-yellow {
    background: linear-gradient(270deg, rgba(255, 204, 0, 0.4) 0%, rgba(255, 204, 0, 0.1) 100%);
    border-top: 1px solid rgba(255, 204, 0, 0.3);
    border-bottom: 1px solid rgba(255, 204, 0, 0.3);
}

.home-blue {
    background: linear-gradient(0deg, rgba(34, 180, 255, 0.4) 0%, rgba(34, 180, 255, 0.1) 100%);
    border-left: 1px solid rgba(34, 180, 255, 0.3);
    border-right: 1px solid rgba(34, 180, 255, 0.3);
}

.home-path-active {
    box-shadow: inset 0 0 15px currentColor;
    filter: brightness(1.5);
    z-index: 2;
    animation: home-pulse 1.5s infinite alternate;
}

@keyframes home-pulse {
    from {
        opacity: 0.8;
    }

    to {
        opacity: 1;
        filter: brightness(1.8);
    }
}

/* ============================================
   START POSITIONS - ARROW INDICATORS
   ============================================ */

.start-red,
.start-green,
.start-yellow,
.start-blue {
    position: relative;
    border-radius: 50%;
    transform: scale(0.85);
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
}

.start-red {
    background: radial-gradient(circle at 30% 30%, #ff5e62, #ff0015);
    border: 2px solid rgba(255, 255, 255, 0.4);
}

.start-green {
    background: radial-gradient(circle at 30% 30%, #42e695, #00b050);
    border: 2px solid rgba(255, 255, 255, 0.4);
}

.start-yellow {
    background: radial-gradient(circle at 30% 30%, #ffe066, #ff9900);
    border: 2px solid rgba(255, 255, 255, 0.4);
}

.start-blue {
    background: radial-gradient(circle at 30% 30%, #56ccf2, #2f80ed);
    border: 2px solid rgba(255, 255, 255, 0.4);
}

.start-red::after,
.start-green::after,
.start-yellow::after,
.start-blue::after {
    content: 'â–¶';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(calc(-1 * var(--board-rotation, 0deg)));
    font-size: 10px;
    color: white;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5));
}

/* ============================================
   CENTER / GOAL - THE CROWN JEWEL
   ============================================ */

.center {
    background: conic-gradient(from 45deg,
            rgba(255, 59, 78, 0.3) 0deg 90deg,
            rgba(0, 255, 136, 0.3) 90deg 180deg,
            rgba(255, 204, 0, 0.3) 180deg 270deg,
            rgba(34, 180, 255, 0.3) 270deg 360deg);
    border: 1px solid rgba(255, 255, 255, 0.15);
}

.board-cell.center[data-row="7"][data-col="7"]::after {
    content: 'ðŸ‘‘';
    position: absolute;
    font-size: clamp(20px, 4.5vw, 32px);
    filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.8));
    animation: crown-float 3s infinite ease-in-out;
}

/* ============================================
   IMPACT EFFECTS
   ============================================ */

.land-ripple {
    position: relative;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 5;
}

.land-ripple::before {
    content: '';
    position: absolute;
    inset: -4px;
    border: 2px solid var(--ripple-color);
    border-radius: 50%;
    animation: land-ripple-out 0.6s cubic-bezier(0, 0, 0.2, 1) forwards;
}

@keyframes land-ripple-out {
    0% {
        transform: scale(0.8);
        opacity: 1;
        border-width: 3px;
    }

    100% {
        transform: scale(2.2);
        opacity: 0;
        border-width: 0px;
    }
}

/* ============================================
   RESPONSIVE & AAA EFFECTS
   ============================================ */

/* Small Mobile (iPhone SE etc) */
@media (max-width: 380px) {
    .ludo-board {
        width: 100%;
        max-width: 340px;
        padding: 4px;
        gap: 1px;
    }
}

/* Mobile Optimization - Maximized Board Size */
@media (max-width: 480px) {
    .ludo-board {
        /* AAA Mobile Sizing: fill available space perfectly
           Grid overhead: header(28) + 2*pod(44) + footer(80) = 196px + 20px margin = 216px */
        width: min(96vw, calc(100dvh - 220px));
        height: min(96vw, calc(100dvh - 220px));
        max-width: none; /* Remove 500px constraint for mobile */
        max-height: 100%; /* Never overflow grid cell */
        padding: 6px;
        gap: 1.5px;
        border-radius: 24px; /* Proportionally smaller for mobile */
    }

    .token-layer {
        inset: 6px; /* Match board padding */
        gap: 1.5px;
    }
}

/* Tablet / Desktop */
@media (min-width: 768px) {
    .ludo-board {
        width: min(75vw, calc(100vh - 160px), 600px);
        height: min(75vw, calc(100vh - 160px), 600px);
        padding: 10px;
        gap: 3px;
        border-radius: 40px;
    }

    .token-layer {
        inset: 10px;
        gap: 3px;
    }
}

/* AAA ENHANCEMENTS: SHAKE & FOCUS - GLOBALLY RESPONSIVE */

/* Screen Shake Animation */
.shake-active .ludo-board {
    animation: board-shake 0.4s cubic-bezier(.36, .07, .19, .97) both;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    perspective: 1000px;
}

@keyframes board-shake {

    10%,
    90% {
        transform: translate3d(-1px, 0, 0);
    }

    20%,
    80% {
        transform: translate3d(2px, 0, 0);
    }

    30%,
    50%,
    70% {
        transform: translate3d(-4px, 0, 0);
    }

    40%,
    60% {
        transform: translate3d(4px, 0, 0);
    }
}

/* Dynamic Camera / Focus System */
.board-focus-wrapper {
    transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
    transform-origin: center;
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
}

.focus-active {
    transform: scale(1.05);
}

.focus-zoom-in {
    transform: scale(1.15);
}