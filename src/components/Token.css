/* ============================================
   TOKEN STYLING - CSS Grid + Hop Animation
   ============================================ */

.token {
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: auto;
    cursor: default;
    transition: transform 0.15s ease;
    transform: rotate(var(--rotation, 0deg));
}

/* Stacked tokens get offset */
.token.stacked {
    transform:
        rotate(var(--rotation, 0deg)) translate(var(--stack-x, 0), var(--stack-y, 0)) scale(var(--stack-scale, 1));
}

/* ============================================
   HOP ANIMATION - When token moves
   ============================================ */

.token.moving {
    animation: token-hop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    z-index: 200 !important;
}

.token.moving .token-inner {
    animation: token-squash 0.4s ease-out;
}

@keyframes token-hop {
    0% {
        transform: rotate(var(--rotation, 0deg)) translateY(0) scale(1);
    }

    30% {
        transform: rotate(var(--rotation, 0deg)) translateY(-35%) scale(1.1);
    }

    50% {
        transform: rotate(var(--rotation, 0deg)) translateY(-40%) scale(1.05);
    }

    80% {
        transform: rotate(var(--rotation, 0deg)) translateY(5%) scale(0.95);
    }

    100% {
        transform: rotate(var(--rotation, 0deg)) translateY(0) scale(1);
    }
}

@keyframes token-squash {
    0% {
        transform: scaleY(1) scaleX(1);
    }

    30% {
        transform: scaleY(1.1) scaleX(0.9);
    }

    80% {
        transform: scaleY(0.85) scaleX(1.1);
    }

    100% {
        transform: scaleY(1) scaleX(1);
    }
}

/* Landing ripple - expands from center when token lands */
.token-landing-ripple {
    position: absolute;
    inset: -20%;
    border: 2px solid currentColor;
    border-radius: 50%;
    animation: ripple-expand 0.5s ease-out forwards;
    pointer-events: none;
}

@keyframes ripple-expand {
    0% {
        transform: scale(0.5);
        opacity: 0.8;
    }

    100% {
        transform: scale(1.8);
        opacity: 0;
    }
}

.token-inner {
    width: 85%;
    height: 85%;
    border-radius: 50%;
    position: relative;

    /* 3D sphere effect */
    box-shadow:
        0 0 10px currentColor,
        inset 0 -3px 6px rgba(0, 0, 0, 0.4),
        inset 0 3px 6px rgba(255, 255, 255, 0.2);
}

/* Shine highlight */
.token-shine {
    position: absolute;
    top: 12%;
    left: 18%;
    width: 35%;
    height: 35%;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%,
            rgba(255, 255, 255, 0.9),
            rgba(255, 255, 255, 0.4) 40%,
            transparent 70%);
    pointer-events: none;
}

/* Pulsing glow ring */
.token-glow-ring {
    position: absolute;
    inset: -8%;
    border: 2px solid currentColor;
    border-radius: 50%;
    filter: blur(3px);
    pointer-events: none;
}

/* ============================================
   TOKEN COLORS
   ============================================ */

.token-red .token-inner {
    background: radial-gradient(circle at 35% 35%, #ff9999, #ff4757 50%, #cc2233);
    border: 2px solid rgba(255, 71, 87, 0.7);
}

.token-red {
    color: #ff4757;
}

.token-green .token-inner {
    background: radial-gradient(circle at 35% 35%, #6fffb0, #00d26a 50%, #00a855);
    border: 2px solid rgba(0, 210, 106, 0.7);
}

.token-green {
    color: #00d26a;
}

.token-yellow .token-inner {
    background: radial-gradient(circle at 35% 35%, #fff080, #ffbe0b 50%, #e6a800);
    border: 2px solid rgba(255, 190, 11, 0.7);
}

.token-yellow {
    color: #ffbe0b;
}

.token-blue .token-inner {
    background: radial-gradient(circle at 35% 35%, #8ac4ff, #3a86ff 50%, #2060cc);
    border: 2px solid rgba(58, 134, 255, 0.7);
}

.token-blue {
    color: #3a86ff;
}

/* ============================================
   STATES
   ============================================ */

.token.clickable {
    cursor: pointer;
}

.token.highlighted .token-inner {
    box-shadow:
        0 0 15px currentColor,
        0 0 30px currentColor,
        inset 0 -3px 6px rgba(0, 0, 0, 0.4),
        inset 0 3px 6px rgba(255, 255, 255, 0.2);
}

.token.in-yard .token-inner {
    width: 70%;
    height: 70%;
}

/* ============================================
   RESPONSIVE
   ============================================ */

@media (max-width: 480px) {
    .token-inner {
        box-shadow:
            0 0 6px currentColor,
            inset 0 -2px 4px rgba(0, 0, 0, 0.4);
    }

    .token-shine {
        width: 30%;
        height: 30%;
    }
}